---
- name: Playbook to install user programs
  hosts: localhost

  tasks: 
    - name: Install IntelliJ Idea if not installed
      ansible.builtin.include_role:
        name: programs
        tasks_from: intellij

    - name: Install and configure Flameshot
      ansible.builtin.include_role:
        name: programs
        tasks_from: flameshot

    - name: Attempt to install TexLive for LaTeX support (may take hours)
      block:
        - name: Install TexLive
          ansible.builtin.include_role:
            name: programs
            tasks_from: texlive
          when: false
      rescue:
        - name: Remove failed TexLive installation
          ansible.builtin.file:
            path: /usr/local/texlive
            state: absent
    